
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Enforce HTTPS -->
    <script type="text/javascript">
        var host = "swendrowski.us";
        if ((host == window.location.host) && (window.location.protocol != "https:"))
            window.location.protocol = "https";
    </script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Cody Swendrowski</title>

    <!-- Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
          rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <!-- Code Highlighting -->
    <link rel="stylesheet" href="\Assets\css\default.css">
    <link rel="stylesheet" href="\Assets\css\vs.css">

    <!-- Bootstrap -->
    <link href="\Assets\css\bootstrap.min.css" rel="stylesheet">
    <link href="\Assets\css\mdb.min.css" rel="stylesheet">

    <link href="\Assets\css\custom.css" rel="stylesheet">

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="/Assets/js/jquery.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script>
        var urlParams;
        (window.onpopstate = function () {
            var match,
                pl = /\+/g, // Regex for replacing addition symbol with a space
                search = /([^&=]+)=?([^&]*)/g,
                decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
                query = window.location.search.substring(1);

            urlParams = {};
            while (match = search.exec(query))
                urlParams[decode(match[1])] = decode(match[2]);
        })();
    </script>
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-50591356-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-50591356-1');
    </script>

</head>
<body>
    
<!--Navbar-->

<nav class="navbar elegant-color navbar-fixed-top z-depth-1" role="navigation">
    <!--Content for large and medium screens-->
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand waves-effect waves-light" href="/">Cody Swendrowski</a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li class="dropdown">
    <a class="dropdown-toggle waves-effect waves-light" type="button" id="dropdownMenu1"
       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Blog Posts
    </a>
    <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
        <li class="waves-effect waves-light">
            <a class="dropdown-item" href="/posts.html?category=salesforce">Salesforce</a>
        </li>
        <li class="waves-effect waves-light">
            <a class="dropdown-item" href="/posts.html?category=csharp">C#</a>
        </li>
        <li class="waves-effect waves-light">
            <a class="dropdown-item" href="/posts.html?category=foundryvtt">FoundryVTT</a>
        </li>
        <li class="waves-effect waves-light">
            <a class="dropdown-item" href="/posts.html?category=general">General</a>
        </li>
    </ul>
</li>
<li>
    <a class="waves-effect waves-light" data-toggle="modal" data-target="#myModal">About Me</a>
</li>

            </ul>
        </div>
    </div>
</nav>

<!--/.Navbar-->



<div class="container-fluid">
<div class="background-row row grey darken-1 mask pattern-7" />

<div class="container post-container">

<div class="row">
 <div>            <!--Featured Image-->
            <div class="view overlay hm-white-slight z-depth-2">
                
                <img src="https://raw.githubusercontent.com/cswendrowski/swendrowski-site/master/input/img/tilepuzzle.gif" class="img-responsive" alt="">
            </div>
</div>
 <div>            <!--Post data-->
            <div class="jumbotron card grey lighten-5">
                <div class="card-block">
                    <h2 class="h2-responsive center-on-small-only">Making a rotating puzzle in FoundryVTT using Trigger Happy</h2>
                    <hr>
                    <h5 class="h5-responsive text-muted center-on-small-only">Cody Swendrowski - 07/09/2020</h5>
                    <a data-pocket-label="pocket" data-pocket-count="none" class="pocket-btn" data-lang="en"></a>
                    <article class="blog-post flow-text">
                        <h2>Modules used</h2>
<h3>Trigger Happy</h3>
<p>Trigger Happy is the bread and butter of how this works - it allows you to setup a Journal entry with triggers such as &quot;When Actor A is clicked, execute Macro 1&quot;</p>
<p>https://foundryvtt.com/packages/trigger-happy/</p>
<h3>Furnace</h3>
<p>By default, Macros can't accept any sort of data, meaning they can only do one thing. Furnace has an &quot;Advanced Macros&quot; feature that allow us to pass in &quot;arguments&quot; that will let us rotate different puzzle tiles using the same Macro.</p>
<p>https://foundryvtt.com/packages/furnace/</p>
<h2>So you want a puzzle</h2>
<p>The general structure of the puzzle looks like this: When a player clicks on a torch (their character pulls it, they magically enable it, whatever you want to narrate it as), it rotates the associated puzzle tile 90 degrees clockwise. Door unlocking is done manually by the GM once they connect a path, but in theory you could setup the macro to check if the tiles are in the correct rotation to open a door and unlock it automatically.</p>
<p>The first thing you'll need to do is create a new macro named &quot;rotatetile&quot;:</p>
<pre><code class="language-js">// args[0] contains the name of the time to rotate, such as &quot;A1&quot;
// Get the tile to rotate
var tile = canvas.tiles.placeables.filter(x =&gt; x.data.img.includes(args[0]))[0];

var toRotate = tile.data.rotation + 90;
// Tiles only rotate up to 360, so reset it if we exceed that
if (toRotate == 360) {
  toRotate = 0;
}

// Do the rotation
await tile.rotate(toRotate, 90);
return;
</code></pre>
<p>The Macro does the rotation, but we still need to know when and what to rotate.</p>
<p>For each torch, hide an invisible actor on the torch so the players have something to &quot;click&quot;:</p>
<img src="https://raw.githubusercontent.com/cswendrowski/swendrowski-site/master/input/img/puzzletriggeractors.PNG" class="img-responsive" />
<p>Now that there are things to click, Trigger Happy will let us connect each Actor to a Macro call using the format <code>&#64;Token[Token Name] &#64;Trigger[click] &#64;ChatMessage[/rotatetile TileName]</code></p>
<p>Either add to an existing Trigger Happy Journal entry, or create a new one, and include the following:</p>
<pre><code>&#64;Token[A1] &#64;Trigger[click] &#64;ChatMessage[/rotatetile A1]

&#64;Token[A2] &#64;Trigger[click] &#64;ChatMessage[/rotatetile A2]

&#64;Token[A3] &#64;Trigger[click] &#64;ChatMessage[/rotatetile A3]

&#64;Token[B1] &#64;Trigger[click] &#64;ChatMessage[/rotatetile B1]

&#64;Token[B2] &#64;Trigger[click] &#64;ChatMessage[/rotatetile B2]

&#64;Token[B3] &#64;Trigger[click] &#64;ChatMessage[/rotatetile B3]

&#64;Token[C1] &#64;Trigger[click] &#64;ChatMessage[/rotatetile C1]

&#64;Token[C2] &#64;Trigger[click] &#64;ChatMessage[/rotatetile C2]

&#64;Token[C3] &#64;Trigger[click] &#64;ChatMessage[/rotatetile C3]
</code></pre>
<h2>All done!</h2>


                    </article>
                </div>
            </div>
</div>
 <div>            <div class="jumbotron card grey lighten-4">
                <div class="card-block">
                    <div id="disqus_thread"></div>
                    <script>

                        var disqus_config = function () {
                            this.page.url = window.location.href;  // Replace PAGE_URL with your page's canonical URL variable
                            this.page.identifier = 'Making a rotating puzzle in FoundryVTT using Trigger Happy'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                        };

                        (function () { // DON'T EDIT BELOW THIS LINE
                            var d = document, s = d.createElement('script');

                            s.src = '//swendrowski.disqus.com/embed.js';

                            s.setAttribute('data-timestamp', +new Date());
                            (d.head || d.body).appendChild(s);
                        })();
                    </script>
                    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
                </div>
            </div>
</div>
</div></div>



<div class="fixed-action-btn" style="bottom: 45px; right: 24px;">
    <a class="btn-floating btn-large grey">
        <i class="large material-icons">share</i>
    </a>
    <ul>
        <li>
            <a class="btn-floating btn-large gplus-bg waves-effect waves-light"
               onclick="javascript: window.open('https://plus.google.com/share?url=' + window.location.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600'); return false;">
                <i class="fa fa-google-plus"> </i>
            </a>
        </li>
        <li>
            <a class="btn-floating btn-large tw-bg waves-effect waves-light"
               onclick="javascript: window.open('https://twitter.com/intent/tweet?via=cswendrowski&url=' + window.location.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600'); return false;">
                <i class="fa fa-twitter"> </i>
            </a>
        </li>
        <li>
            <a class="btn-floating btn-large li-bg waves-effect waves-light"
               onclick="javascript: window.open('https://www.linkedin.com/shareArticle?mini=true&url=' + window.location.href + '&summary=Making a rotating puzzle in FoundryVTT using Trigger Happy', '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600' ); return false;">
                <i class="fa fa-linkedin"> </i>
            </a>
        </li>
    </ul>
</div>

<!-- Pocket -->
<script type="text/javascript">
    !function (d, i) {
        if (!d.getElementById(i)) {
            var j = d.createElement("script");
            j.id = i;
            j.src = "https://widgets.getpocket.com/v1/j/btn.js?v=1";
            var w = d.getElementById(i);
            d.body.appendChild(j);
        }
    }(document, "pocket-btn-js");
</script>

<footer class="page-footer elegant-color center-on-small-only">
    <div class="footer-copyright text-center rgba-black-light">
        <div class="container-fluid small">
            <span>
                © 2016 Copyright.
            </span>
            <span>You are free to distribute and reuse the contents of this blog with accreditation under the <a href="http://creativecommons.org/licenses/by/4.0/" class="small">Creative Commons 4.0 License</a>.</span>
            <div>The views and opinions within this blog are my own and do not represent those of my employer nor those of a third party.</div>
        </div>
    </div>
</footer>

</div>
    <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
        <!--Author box-->
        <div class="card-panel author-box hoverable">
            <div class="row center-on-small-only">
                <h5 class="text-center">About Me</h5>
                <hr>
                <!--Avatar-->
                <div class="col-sm-3 ">
                    <img src="http://i.imgur.com/bGNQKhD.jpg" class="img-circle img-responsive">
                </div>
                <!--/.Avatar-->
                <!--Content-->
                <div class="col-sm-9">
                    <h5 class="author-name">Cody Swendrowski</h5>

                    <div class="personal-sm">
                        <a class="icons-sm gh-ic" target="_blank" href="https://github.com/cswendrowski" rel="noopener noreferrer"><i class="fa fa-github"> </i></a>
                        <a class="icons-sm li-ic" target="_blank" href="https://www.linkedin.com/in/cody-swendrowski-88828654" rel="noopener noreferrer"><i class=" fa fa-linkedin"> </i></a>
                        <a class="icons-sm email-ic" target="_blank" href="mailto:cody@swendrowski.us" rel="noopener noreferrer"><i class="fa fa-envelope-o"> </i></a>
                    </div>
                    <br>
                    <!--Description-->
                    <p class="author-description">
                        I love writing code and making cool things. <br/>
                        Neural networks, genetic programming, and natural language processing are all active interests of mine. Occassionally I do VR programming as well. <br/>
                        <br/>
                        MSCD certified, Sitecore certified, and soon to be Salesforce certified.
                    </p>
                    <!--/.Description-->
                </div>
                <!--Content-->
            </div>
        </div>
        <!--/.Author box-->
    </div>
</div>


    <footer class="page-footer elegant-color center-on-small-only">
    <div class="footer-copyright text-center rgba-black-light">
        <div class="container-fluid small">
            <span>
                © 2016 Copyright.
            </span>
            <span>You are free to distribute and reuse the contents of this blog with accreditation under the <a href="http://creativecommons.org/licenses/by/4.0/" class="small">Creative Commons 4.0 License</a>.</span>
            <div>The views and opinions within this blog are my own and do not represent those of my employer nor those of a third party.</div>
        </div>
    </div>
</footer>



    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/Assets/js/bootstrap.min.js"></script>
    <script src="/Assets/js/mdb.min.js"></script>

    <!-- Code Highlighting -->
    <script src="/Assets/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- Disqus Comments -->
    <script id="dsq-count-scr" src="//swendrowski.disqus.com/count.js" async></script>
</body>
</html>
